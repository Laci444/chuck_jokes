{
	"info": {
		"_postman_id": "723ce41d-74e6-4b55-95de-01aeccf134df",
		"name": "ChuckJokeTests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "49017462",
		"_collection_link": "https://verdesenikoandrea-514028.postman.co/workspace/Enik%C5%91's-Workspace~f6cf9a12-8149-457e-89b5-0404e522394c/collection/49017462-723ce41d-74e6-4b55-95de-01aeccf134df?action=share&source=collection_link&creator=49017462"
	},
	"item": [
		{
			"name": "TC007",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"pm.test(\"Response has email\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"email\");\r",
							"});\r",
							"\r",
							"pm.test(\"Response has access token\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    if (jsonData.access) {\r",
							"        pm.expect(jsonData.access).to.be.a(\"string\");\r",
							"    }\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"username\": \"tesztuser49\",\r\n    \"email\": \"tesztuser49@example.com\",\r\n    \"password\": \"password\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/auth/register/",
					"host": [
						"{{url}}"
					],
					"path": [
						"auth",
						"register",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC006",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let data = pm.response.json();\r",
							"\r",
							"pm.collectionVariables.set(\"access\", data.access);\r",
							"pm.collectionVariables.set(\"refresh\", data.refresh);\r",
							"\r",
							"if (data.access) {\r",
							"    pm.environment.set(\"access_token\", data.access);\r",
							"    console.log(\"Access token set:\", data.access);\r",
							"}\r",
							"\r",
							"if (data.refresh) {\r",
							"    pm.environment.set(\"refresh_token\", data.refresh);\r",
							"    console.log(\"Refresh token set:\", data.refresh);\r",
							"}\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"{{reg_username}}\",\r\n  \"password\": \"{{reg_password}}\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/auth/token",
					"host": [
						"{{url}}"
					],
					"path": [
						"auth",
						"token"
					]
				}
			},
			"response": []
		},
		{
			"name": "TC001",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"pm.test(\"Válasz JSON formátumú\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{url}}/api/jokes/",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"jokes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC002",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"pm.test(\"JSON contains text field\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property(\"text\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{url}}/api/jokes/teszt123/",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"jokes",
						"teszt123",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC003",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"pm.test(\"Response is an array\", function () {\r",
							"    const jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.be.an(\"array\");\r",
							"});\r",
							"\r",
							"const likes = pm.response.json();\r",
							"if (likes.length > 0) {\r",
							"    pm.test(\"Like objektumok tartalmazzák az id-t és username-t\", function () {\r",
							"        likes.forEach(like => {\r",
							"            pm.expect(like).to.have.property(\"id\");\r",
							"            pm.expect(like).to.have.property(\"username\");\r",
							"        });\r",
							"    });\r",
							"}\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"email\": \"teszt@felhasznalo.com\",\r\n    \"password\": \"jelszo123\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/api/jokes/teszt123/likes/",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"jokes",
						"teszt123",
						"likes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC004",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"const data = pm.response.json();\r",
							"pm.test(\"Response contains like_count\", function () {\r",
							"    pm.expect(data).to.have.property(\"like_count\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"email\": \"teszt@felhasznalo.com\",\r\n    \"password\": \"jelszo123\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/api/jokes/teszt123/likes/",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"jokes",
						"teszt123",
						"likes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC005",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 204\", function () {\r",
							"    pm.response.to.have.status(204);\r",
							"});\r",
							"\r",
							"pm.test(\"Response body is empty\", function () {\r",
							"    pm.expect(pm.response.text()).to.be.empty;\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/api/jokes/teszt123/likes/",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"jokes",
						"teszt123",
						"likes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC008",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"let data = pm.response.json();\r",
							"pm.test(\"Response contains access token\", function () {\r",
							"    pm.expect(data).to.have.property(\"access\");\r",
							"});\r",
							"\r",
							"if (data.access) {\r",
							"    pm.environment.set(\"access_token\", data.access);\r",
							"    console.log(\"Access token updated:\", data.access);\r",
							"}\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"refresh\": \"{{refresh_token}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/auth/token/refresh",
					"host": [
						"{{url}}"
					],
					"path": [
						"auth",
						"token",
						"refresh"
					]
				}
			},
			"response": []
		},
		{
			"name": "TC009",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 401\", function () {\r",
							"    pm.response.to.have.status(401);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"let data = pm.response.json();\r",
							"pm.test(\"Response contains error message\", function () {\r",
							"    pm.expect(data).to.have.property(\"detail\"); // vagy ami a backend által visszaadott hiba kulcs\r",
							"    console.log(\"Login error detail:\", data.detail);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"{{reg_username}}\",\r\n  \"password\": \"rossz_jelszo\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/auth/token",
					"host": [
						"{{url}}"
					],
					"path": [
						"auth",
						"token"
					]
				}
			},
			"response": []
		},
		{
			"name": "TC010",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Ellenőrizzük a státuszkódot (400 Bad Request)\r",
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"let data = pm.response.json();\r",
							"pm.test(\"Response contains error message\", function () {\r",
							"    pm.expect(data).to.have.property(\"email\");\r",
							"    console.log(\"Registration error detail:\", data.email);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"user\",\r\n  \"email\": \"invalid_email_format\",\r\n  \"password\": \"valami_jelszo123\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/auth/register/",
					"host": [
						"{{url}}"
					],
					"path": [
						"auth",
						"register",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC011",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is HTML\", function () {\r",
							"    pm.response.to.have.header(\"Content-Type\");\r",
							"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/html\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "text/html",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url}}/admin",
					"host": [
						"{{url}}"
					],
					"path": [
						"admin"
					]
				}
			},
			"response": []
		},
		{
			"name": "TC012",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Ellenőrizzük a státuszkódot\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// 2. Ellenőrizzük, hogy a válasz tartalmazza az \"openapi\" kulcsot\r",
							"pm.test(\"Response contains 'openapi' keyword\", function () {\r",
							"    pm.expect(pm.response.text()).to.include(\"openapi\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url}}/schema",
					"host": [
						"{{url}}"
					],
					"path": [
						"schema"
					]
				}
			},
			"response": []
		},
		{
			"name": "TC013",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is HTML\", function () {\r",
							"    pm.response.to.have.header(\"Content-Type\");\r",
							"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/html\");\r",
							"});\r",
							"\r",
							"pm.test(\"Response contains 'SwaggerUIBundle'\", function () {\r",
							"    pm.expect(pm.response.text()).to.include(\"SwaggerUIBundle\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "text/html",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url}}/schema/swagger-ui/",
					"host": [
						"{{url}}"
					],
					"path": [
						"schema",
						"swagger-ui",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "TC014",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response is HTML\", function () {\r",
							"    pm.response.to.have.header(\"Content-Type\");\r",
							"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/html\");\r",
							"});\r",
							"\r",
							"pm.test(\"Response contains 'redoc'\", function () {\r",
							"    pm.expect(pm.response.text().toLowerCase()).to.include(\"redoc\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "text/html",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url}}/schema/redoc/",
					"host": [
						"{{url}}"
					],
					"path": [
						"schema",
						"redoc",
						""
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "access",
			"value": ""
		},
		{
			"key": "refresh",
			"value": ""
		}
	]
}